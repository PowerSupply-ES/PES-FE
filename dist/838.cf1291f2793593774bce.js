"use strict";(self.webpackChunkpes_fe=self.webpackChunkpes_fe||[]).push([[838],{2394:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(3719),n=t.n(a);const l=async e=>{try{return(await n().get(`/api2/problemtitle/${e}`,{withCredentials:!0})).data}catch(e){console.log(e)}console.log("problemId:",e)}},6385:(e,s,t)=>{t.d(s,{$2:()=>o,OE:()=>r,i0:()=>i,zg:()=>c});var a=t(1594),n=t.n(a),l=t(4848);const c=e=>e?e.replace("T"," "):"",r=()=>{window.history.back()},i=e=>e.split("\n").map(((e,s)=>(0,l.jsxs)(n().Fragment,{children:[e,(0,l.jsx)("br",{})]},s))),o=e=>e.split("\n\n").map(((e,s)=>(0,l.jsxs)("span",{children:[e,(0,l.jsx)("br",{})]},s)))},947:(e,s,t)=>{t.d(s,{A:()=>d});var a=t(1594),n=t(3719),l=t.n(n);const c=e=>{const[s,t]=(0,a.useState)(null),n=(0,a.useCallback)((async()=>{try{const s=await(async e=>{try{const{data:s}=await l().get(`/api2/problem/${e}`,{withCredentials:!0});return s}catch(e){console.log(e)}})(e);t(s)}catch(e){console.error(e)}}),[e]);return(0,a.useEffect)((()=>{n()}),[n]),s};var r=t(2394);var i=t(7767);const o=e=>{const s=(0,i.Zp)(),t=(0,a.useRef)(""),[n,c]=(0,a.useState)(null);return{detail:n,textHandler:function(e){t.current=e},submitCode:async()=>{if(t.current){const{data:a,status:n}=await(async(e,s)=>{try{const t=await l().post(`/api2/submit/${s}`,{code:e,problemId:s});return{data:t.data,status:t.status}}catch(e){return console.log(e),l().isAxiosError(e)?{status:e.response?e.response.status:500}:{status:500}}})(t.current,e);a?201===n?(console.log(a),alert("문제를 맞혔습니다! 질의응답 페이지로 이동합니다."),sessionStorage.setItem("problemId",e.toString()),s(`/question/${a.answer_id}`)):202===n?(c(a.detail),alert("문제를 틀렸습니다! 다시 풀어보세요.")):500===n&&alert(`server가 응답하지 않네요! 관리자에게 상황을 공유해주세요! : ${a.message}`):alert("오류!")}else alert("코드를 입력해주세요!")}}},d=e=>{const s=(e=>{const[s,t]=(0,a.useState)(null),n=(0,a.useCallback)((async()=>{try{const s=await(0,r.A)(e);t(s||null)}catch(e){console.error(e),t(null)}}),[e]);return(0,a.useEffect)((()=>{n()}),[n]),s})(e),t=c(e),{textHandler:n,submitCode:l,detail:i}=o(e);return{title:s,problem:t,detail:i,isLogin:sessionStorage.getItem("status"),textHandler:n,submitCode:l}}},3838:(e,s,t)=>{t.r(s),t.d(s,{default:()=>v});var a=t(1594),n=t.n(a),l=t(7767),c=t(3719),r=t.n(c);const i=(e,s,t)=>{const[n,l]=(0,a.useState)(""),[c,i]=(0,a.useState)(""),[o,d]=(0,a.useState)(null),[u,m]=(0,a.useState)([]),[h,x]=(0,a.useState)(0),p=(0,a.useCallback)((async()=>{try{const s=await(async e=>{try{const{data:s}=await r().get(`/api2/question/${e}`,{withCredentials:!0});return s.code}catch(e){throw console.log(e),e}})(e);null!=s&&i(s)}catch(e){console.log(e)}}),[e]),b=(0,a.useCallback)((async()=>{try{const s=await(async e=>{try{return(await r().get(`/api/answer/${e}`,{withCredentials:!0})).data}catch(e){throw console.log(e),e}})(e);d(s),l(s.answerState||"")}catch(e){console.log(e)}}),[e]),j=(0,a.useCallback)((async()=>{try{const s=await(async e=>{try{return(await r().get(`/api/comment/${e}`,{withCredentials:!0})).data}catch(e){throw console.log(e),e}})(e);let t=0;m(s);for(let e=0;e<s.length;e++)1===s[e].commentPassFail&&t++;x(t)}catch(e){console.log(e)}}),[e]);return(0,a.useEffect)((()=>{p(),b()}),[p,b]),(0,a.useEffect)((()=>{"comment"!==n&&"success"!==n&&"fail"!==n||j()}),[n,j]),{code:c,qnA:o,state:n,feedbacks:u,passCount:h,getCodes:p,getQuestions:b,postAnswer:async(s,t)=>{try{await(async(e,s,t)=>{try{await r().post(`/api/answer/${e}`,{answerFst:s,answerSec:t})}catch(e){throw console.error(e),e}})(e,s,t),alert("성공적으로 답변을 등록했습니다."),window.location.reload()}catch(e){if(r().isAxiosError(e)){const s=e.response?e.response.status:null;400===s?alert("이미 답변이 등록되어 있습니다."):403===s?alert("접근할 수 있는 사용자가 아닙니다."):console.log("알 수 없는 서버 오류가 발생했습니다.",e)}else console.log("예상하지 못한 오류가 발생했습니다.",e)}},postFeedback:async(t,a)=>{try{const n=await(async(e,s,t)=>{try{return await r().post(`/api/comment/${e}`,{comment:s,commentPassFail:t})}catch(e){throw console.error(e),e}})(e,t,a);j(),s(n.status),window.location.reload()}catch(e){if(r().isAxiosError(e)){const s=e.response?.status;403===s?alert("권한이 없습니다!"):400===s?alert("이미 댓글을 달았어요!"):console.log("알 수 없는 오류가 발생했습니다.",e)}else console.log("예상하지 못한 오류가 발생했습니다.",e)}},setCode:i}};var o=t(6385),d=t(4848);const u=n().lazy((()=>Promise.all([t.e(490),t.e(997),t.e(224),t.e(472),t.e(500),t.e(420),t.e(424),t.e(517),t.e(515),t.e(247),t.e(43),t.e(650),t.e(546),t.e(712),t.e(282),t.e(855),t.e(673),t.e(825),t.e(642),t.e(722),t.e(765),t.e(871),t.e(3),t.e(102)]).then(t.bind(t,6102)))),m=e=>{let{FstHandler:s,SecHandler:t,code:n,qnA:l,setCode:c,problemId:r}=e;return(0,d.jsxs)("div",{className:"code_question_container",children:[(0,d.jsx)("div",{className:"code_container",children:(0,d.jsx)(a.Suspense,{fallback:(0,d.jsx)("div",{children:"Loading Code Editor..."}),children:(0,d.jsx)(u,{onChange:c,readOnly:!0,code:n})})}),(0,d.jsx)("div",{className:"question_container",children:"question"===l.answerState?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"question_layout",children:[(0,d.jsxs)("div",{className:"question_header",children:[(0,d.jsx)("div",{className:"question_id",children:"질문 1"}),(0,d.jsx)("div",{className:"header_title",children:l.questionContentFst})]}),(0,d.jsx)("textarea",{className:"answer_input",onChange:s})]}),(0,d.jsxs)("div",{className:"question_layout",children:[(0,d.jsxs)("div",{className:"question_header",children:[(0,d.jsx)("div",{className:"question_id",children:"질문 2"}),(0,d.jsx)("div",{className:"header_title",children:l.questionContentSec})]}),(0,d.jsx)("textarea",{className:"answer_input",onChange:t})]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"question_header",children:[(0,d.jsx)("div",{className:"question_id",children:"질문 1"}),(0,d.jsx)("div",{className:"header_title",children:l.questionContentFst})]}),(0,d.jsx)("div",{className:"answer_input display",children:(0,o.i0)(l.answerFst)}),(0,d.jsxs)("div",{className:"question_header",children:[(0,d.jsx)("div",{className:"question_id",children:"질문 2"}),(0,d.jsx)("div",{className:"header_title",children:l.questionContentSec})]}),(0,d.jsx)("div",{className:"answer_input display",children:(0,o.i0)(l.answerSec)})]})})]})};var h=t(947),x=t(8246);const p=e=>{let{state:s,navigate:t,problemId:l}=e;const[c,r]=(0,a.useState)(!1),{title:i,problem:u}=(0,h.A)(l??-1),m=i?i.problemTitle:"제목 없음",p=u?u.problemContent:"문제 내용 없음",b=u?u.sampleInputs:[],j=u?u.sampleOutputs:[];return null===l||-1===l?(0,d.jsx)(x.f,{className:"problem_header_section",state:s,children:(0,d.jsx)("div",{className:"problem_header",children:(0,d.jsxs)("div",{className:"problem_group",children:[(0,d.jsx)("div",{className:"problem_id",children:"알수없음"}),(0,d.jsx)("div",{className:"header_title",children:"제목 없음"}),(0,d.jsx)("div",{className:"header_answer_state",children:"알수없음"})]})})}):(0,d.jsxs)(x.f,{className:"problem_header_section",state:s,children:[(0,d.jsx)("div",{className:"problem_header",children:(0,d.jsxs)("div",{className:"problem_group",children:[(0,d.jsxs)("div",{className:"problem_id",children:["문제",null!==l?l:"정보 없음"]}),(0,d.jsx)("div",{className:"header_title",children:m}),(0,d.jsx)("div",{className:"header_answer_state",children:"success"===s?"성공":"fail"===s?"실패":"미완료"})]})}),(0,d.jsxs)("div",{className:"button_group",children:[(0,d.jsxs)("button",{className:"button_problem",onClick:()=>{r((e=>!e))},children:["문제보기",c&&(0,d.jsxs)("div",{className:"dropdown_content",children:[(0,d.jsx)("div",{className:"content",style:{whiteSpace:"pre"},children:(0,o.i0)(p)}),(0,d.jsxs)("div",{className:"sample_inputs",children:[(0,d.jsx)("h3",{children:"Sample Inputs:"}),b.map(((e,s)=>(0,d.jsx)(n().Fragment,{children:(0,o.i0)(e)},s)))]}),(0,d.jsxs)("div",{className:"sample_outputs",style:{whiteSpace:"pre"},children:[(0,d.jsx)("h3",{children:"Sample Outputs:"}),j.map(((e,s)=>(0,d.jsx)(n().Fragment,{children:(0,o.i0)(e)},s)))]})]})]}),("success"===s||"fail"===s)&&(0,d.jsx)("button",{className:"button_solution",onClick:()=>t(`/solution/${l}`),children:"다른 풀이 보기"})]})]})};var b=t(6553);const j=e=>{let{navigate:s,code:t,qnA:n,state:l,setCode:c,textFst:r,handleTextFstChange:i,postAnswer:o}=e;const u=Number(sessionStorage.getItem("problemId")),[h,x]=(0,a.useState)("");return(0,d.jsxs)(b.k,{className:"problem_answer_section",children:[(0,d.jsx)(p,{state:l,navigate:s,problemId:u}),"  ",n&&(0,d.jsx)(m,{FstHandler:i,SecHandler:e=>{x(e.target.value)},code:t,qnA:n,setCode:c,problemId:u}),"question"===l&&(!n.answerFst||!n.answerSec)&&(0,d.jsx)("div",{className:"btn_container",children:(0,d.jsx)("button",{className:"button answer",onClick:()=>{r&&h?window.confirm("수정이 불가능합니다. 정말 제출하시겠습니까?")&&o(r,h):alert("내용을 입력해주세요!")},children:"답변하기"})})]})},g=e=>{let{navigate:s,state:t,textFst:n,handleTextFstChange:l,memberStatus:c,feedbacks:r,passCount:i,postFeedback:u}=e;const[m,h]=(0,a.useState)("rgba(4, 202, 0, 0.6)"),[x,p]=(0,a.useState)("rgba(244, 117, 117, 0.6)"),[j,g]=(0,a.useState)(null),v=e=>{g(e)},_=r?Object.values(r):[];return(0,d.jsxs)(b.k,{className:"feedback_section_1",children:[(0,d.jsx)("hr",{style:{height:2,border:"none",backgroundColor:"gray",marginTop:100}}),(0,d.jsxs)("div",{className:"feedback_section",children:["신입생"===c&&_.length<=0&&"comment"===t&&(0,d.jsx)("div",{className:"feedback_waiting_bar",onClick:()=>s("/"),children:"피드백을 기다리는 중입니다..."}),_.length>0&&_.map(((e,s)=>(0,d.jsxs)("div",{className:"feedback_container",children:[1===e.commentPassFail?(0,d.jsx)("div",{className:"feedback_result_pass",children:"PASS"}):(0,d.jsx)("div",{className:"feedback_result_fail",children:"FAIL"}),(0,d.jsxs)("div",{className:"question_header",children:[(0,d.jsx)("div",{className:"feedback_index",children:`Feedback ${s+1}`}),(0,d.jsxs)("div",{className:"feedback_writer",children:[e.writerGen,"기"]}),(0,d.jsx)("div",{className:"feedback_writer",children:e.writerName})]}),(0,d.jsx)("div",{className:"feedback_content display",children:(0,o.i0)(e.commentContent)})]},s))),("재학생"===c||"관리자"===c)&&_.length<=1&&"comment"===t&&(0,d.jsxs)("div",{className:"feed_section",children:[(0,d.jsx)("div",{className:"question_header",children:(0,d.jsx)("div",{className:"feedback_index",children:"Feedback"})}),(0,d.jsx)("textarea",{className:"feedback_content input",placeholder:"피드백을 입력해주세요.",onChange:l}),(0,d.jsxs)("div",{className:"feedback_select_section",children:[(0,d.jsxs)("div",{className:"button_container",children:[(0,d.jsx)("div",{className:"select_button pass",style:{color:m},onClick:()=>{v("1"),p("rgba(244, 117, 117, 0.6)"),h("rgba(4, 202, 0, 1)")},children:"PASS"}),(0,d.jsx)("div",{className:"select_button fail",style:{color:x},onClick:()=>{v("0"),h("rgba(4, 202, 0, 0.6)"),p("rgba(244, 117, 117, 1)")},children:"FAIL"})]}),(0,d.jsx)("p",{className:"select_comment",children:"PASS 혹은 FAIL을 선택해주세요."})]}),(0,d.jsx)("button",{className:"feedback_button",onClick:()=>{n&&n?j?window.confirm("수정이 불가능합니다. 정말 제출하시겠습니까?")&&u(n,parseInt(j,10)):alert("통과 여부를 선택해주세요!"):alert("내용을 입력해주세요!")},children:"답변하기"})]})]}),_.length>=2&&(0,d.jsxs)("div",{className:"result_container",children:[(0,d.jsx)("div",{className:i>=1&&_.length>1?"result success":"result fail",onClick:()=>s("/"),children:i>=1&&_.length>1?`축하합니다! 성공적으로 통과했습니다!  ( ${i}/2 )`:`질문테스트에 통과하지 못했습니다.  ( ${i}/2 )`}),(0,d.jsx)("p",{children:"클릭시 홈화면으로 이동합니다"})]})]})},v=()=>{const e=(0,l.Zp)();let s=new URL(window.location.href),t=Number(s.pathname.split("/")[2]);console.log("answerId= ",t);Number(sessionStorage.getItem("problemId"));const[n,c]=(0,a.useState)(""),r=e=>{c(e.target.value),console.log("e.target.value = ",e.target.value)},{code:o,qnA:u,state:m,feedbacks:h,passCount:x,postFeedback:p,postAnswer:b,setCode:v}=i(t,(e=>{400===e?alert("이미 댓글을 달았습니다."):403===e&&alert("접근할 수 있는 사용자가 아닙니다.")})),_=sessionStorage.getItem("memberStatus");return(0,a.useEffect)((()=>{null===_&&(alert("풀이 열람 권한이 없습니다!"),e(-1))}),[_,u,e]),null===u?(0,d.jsx)(d.Fragment,{children:"Loading..."}):(0,d.jsx)("div",{className:"success"===m?"successPage":"fail"===m?"failPage":"nonePage",children:(0,d.jsx)("div",{children:u&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j,{navigate:e,code:o,qnA:u,state:m,setCode:v,textFst:n,handleTextFstChange:r,postAnswer:b}),(0,d.jsx)(g,{navigate:e,memberStatus:_,feedbacks:h,passCount:x,state:m,postFeedback:p,textFst:n,handleTextFstChange:r})]})})})}}}]);